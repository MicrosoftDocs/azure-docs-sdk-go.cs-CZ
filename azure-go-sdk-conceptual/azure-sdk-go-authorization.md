---
title: Ověřování pomocí sady Azure SDK for Go
description: Seznamte se s metodami ověřování dostupnými v sadě Azure SDK for Go a jejich použitím.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 04/03/2018
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-sdk-go
ms.devlang: go
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: f5e76fc745512a3a52172f560c3a24f510e96feb
ms.sourcegitcommit: d1790b317a8fcb4d672c654dac2a925a976589d4
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/14/2018
ms.locfileid: "39039535"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="9e1e5-103">Metody ověřování v sadě Azure SDK for Go</span><span class="sxs-lookup"><span data-stu-id="9e1e5-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="9e1e5-104">Sada Azure SDK for Go nabízí různé typy a metody ověřování, které může vaše aplikace použít.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="9e1e5-105">Podporuje se řada metod ověřování, od načítání informací z proměnných prostředí až po interaktivní webové ověřování.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="9e1e5-106">Tento článek vás seznámí s dostupnými typy ověřování v sadě SDK a metodami jejich použití.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="9e1e5-107">Naučíte se také osvědčené postupy pro výběr správného typu ověřování pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="9e1e5-108">Dostupné typy a metody ověřování</span><span class="sxs-lookup"><span data-stu-id="9e1e5-108">Available authentication types and methods</span></span>

<span data-ttu-id="9e1e5-109">Sada Azure SDK for Go nabízí několik různých typů ověřování s využitím různých sad přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="9e1e5-110">Jednotlivé typy ověřování jsou k dispozici prostřednictvím různých metod ověřování, které představují způsob, jakým sada SDK přijímá přihlašovací údaje jako vstup.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="9e1e5-111">Následující tabulka obsahuje popis dostupných typů ověřování a situací, ve kterých se doporučuje jejich použití pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="9e1e5-112">Typ ověřování</span><span class="sxs-lookup"><span data-stu-id="9e1e5-112">Authentication type</span></span> | <span data-ttu-id="9e1e5-113">Doporučuje se pro situaci</span><span class="sxs-lookup"><span data-stu-id="9e1e5-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="9e1e5-114">Ověřování pomocí certifikátů</span><span class="sxs-lookup"><span data-stu-id="9e1e5-114">Certificate-based authentication</span></span> | <span data-ttu-id="9e1e5-115">Máte certifikát X509 nakonfigurovaný pro uživatele nebo instanční objekt Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="9e1e5-116">Další informace najdete v tématu [Začínáme s ověřováním pomocí certifikátů v Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="9e1e5-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="9e1e5-117">Přihlašovací údaje klienta</span><span class="sxs-lookup"><span data-stu-id="9e1e5-117">Client credentials</span></span> | <span data-ttu-id="9e1e5-118">Máte nakonfigurovaný instanční objekt, který je nastavený pro tuto aplikaci nebo třídu aplikací, do které patří.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="9e1e5-119">Další informace najdete v tématu [Vytvoření instančního objektu pomocí Azure CLI].</span><span class="sxs-lookup"><span data-stu-id="9e1e5-119">To learn more, see [Create a service principal with Azure CLI].</span></span> |
| <span data-ttu-id="9e1e5-120">Identita spravované služby</span><span class="sxs-lookup"><span data-stu-id="9e1e5-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="9e1e5-121">Vaše aplikace se spouští v prostředku Azure nakonfigurovaném s použitím identity spravované služby.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="9e1e5-122">Další informace najdete v tématu [Identita spravované služby pro prostředky Azure].</span><span class="sxs-lookup"><span data-stu-id="9e1e5-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="9e1e5-123">Token zařízení</span><span class="sxs-lookup"><span data-stu-id="9e1e5-123">Device token</span></span> | <span data-ttu-id="9e1e5-124">Vaše aplikace je určená __pouze__ k interaktivnímu používání a bude mít řadu různých uživatelů, kteří můžou pocházet z několika tenantů AAD.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="9e1e5-125">Uživatelé mají přístup k webovému prohlížeči, přes který se můžou přihlásit.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-125">Users have access to a web browser to sign in.</span></span> <span data-ttu-id="9e1e5-126">Další informace najdete v tématu [Použití ověřování pomocí tokenu zařízení](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="9e1e5-127">Uživatelské jméno a heslo</span><span class="sxs-lookup"><span data-stu-id="9e1e5-127">Username/password</span></span> | <span data-ttu-id="9e1e5-128">Máte interaktivní aplikaci, která neumožňuje použití žádné jiné metody ověřování.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="9e1e5-129">Vaši uživatelé nemají povolené vícefaktorové ověřování pro přihlášení k AAD.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-129">Your users do not have multi-factor authentication enabled for their AAD sign in.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="9e1e5-130">Pokud používáte jiný typ ověřování než přihlašovací údaje klienta, vaše aplikace musí být zaregistrovaná v Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="9e1e5-131">Postup najdete v tématu [Integrace aplikací s Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>
>
> [!NOTE]
> <span data-ttu-id="9e1e5-132">Pokud nemáte speciální požadavky, vyhněte se ověřování pomocí uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="9e1e5-133">V situacích, kdy je vhodné použít přihlašování jednotlivých uživatelů, je obvykle možné místo toho použít ověřování pomocí tokenu zařízení.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-133">In situations where user-based sign in is appropriate, device token authentication can usually be used instead.</span></span>

[Začínáme s ověřováním pomocí certifikátů v Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Vytvoření instančního objektu pomocí Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Identita spravované služby pro prostředky Azure]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="9e1e5-137">Tyto typy ověřování jsou dostupné prostřednictvím různých metod.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="9e1e5-138">[_Ověřování na základě prostředí_](#use-environment-based-authentication) čte přihlašovací údaje přímo z prostředí programu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="9e1e5-139">[_Ověřování na základě souboru_](#use-file-based-authentication) načítá soubor obsahující přihlašovací údaje instančního objektu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="9e1e5-140">[_Ověřování na základě klienta_](#use-an-authentication-client) používá objekt v kódu Go a přenáší na vás zodpovědnost za zadání přihlašovacích údajů během provádění programu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="9e1e5-141">A konečně, [_ověřování pomocí tokenu zařízení_](#use-device-token-authentication) vyžaduje interaktivní přihlašování uživatelů prostřednictvím webového prohlížeče pomocí tokenu a není možné ho používat s ověřováním na základě prostředí ani souboru.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to sign in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="9e1e5-142">Všechny funkce a typy ověřování jsou k dispozici v balíčku `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="9e1e5-143">Pokud nemáte speciální požadavky, vyhněte se ověřování na základě klienta.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="9e1e5-144">Tato metoda ověřování podporuje špatné postupy.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="9e1e5-145">Při použití ověřování na základě klienta je zejména lákavé přihlašovací údaje pevně zakódovat.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="9e1e5-146">Psaní vlastního kódu pro účely ověřování také může vést k selhání u budoucích vydaných verzí sady SDK, pokud se změní požadavky na ověřování.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="9e1e5-147">Použití ověřování na základě prostředí</span><span class="sxs-lookup"><span data-stu-id="9e1e5-147">Use environment-based authentication</span></span>

<span data-ttu-id="9e1e5-148">Pokud svou aplikaci spouštíte v přísně kontrolovaném prostředí, například v kontejneru, ověřování na základě prostředí je přirozenou volbou.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="9e1e5-149">Před spuštěním aplikace nakonfigurujete příkazové prostředí a sada Go SDK za běhu načte tyto proměnné prostředí a provede ověření v Azure.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span>

<span data-ttu-id="9e1e5-150">Ověřování na základě prostředí podporuje všechny metody ověřování s výjimkou tokenů zařízení a vyhodnocuje je v následujícím pořadí: přihlašovací údaje klienta, certifikáty, uživatelské jméno a heslo a identita spravované služby.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="9e1e5-151">Pokud požadovaná proměnná prostředí není nastavená nebo pokud sada SDK obdrží z ověřovací služby odmítnutí, vyzkouší se další typ ověřování.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="9e1e5-152">Pokud sada SDK nedokáže provést ověření z prostředí, vrátí chybu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="9e1e5-153">Následující tabulka obsahuje podrobnosti o proměnných prostředí, které je potřeba nastavit pro jednotlivé typy ověřování podporované ověřováním na základě prostředí.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="9e1e5-154">Typ ověřování</span><span class="sxs-lookup"><span data-stu-id="9e1e5-154">Authentication type</span></span> | <span data-ttu-id="9e1e5-155">Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="9e1e5-155">Environment variable</span></span> | <span data-ttu-id="9e1e5-156">Popis</span><span class="sxs-lookup"><span data-stu-id="9e1e5-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="9e1e5-157">__Přihlašovací údaje klienta__</span><span class="sxs-lookup"><span data-stu-id="9e1e5-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9e1e5-158">ID tenanta Active Directory, do kterého instanční objekt patří.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9e1e5-159">Název nebo ID instančního objektu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="9e1e5-160">Tajný klíč přidružený k instančnímu objektu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="9e1e5-161">__Certifikát__</span><span class="sxs-lookup"><span data-stu-id="9e1e5-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9e1e5-162">ID tenanta Active Directory, ve kterém je certifikát zaregistrovaný.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9e1e5-163">ID klienta aplikace přidruženého k certifikátu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="9e1e5-164">Cesta k souboru klientského certifikátu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="9e1e5-165">Heslo pro klientský certifikát.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="9e1e5-166">__Uživatelské jméno a heslo__</span><span class="sxs-lookup"><span data-stu-id="9e1e5-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9e1e5-167">ID tenanta Active Directory, do kterého uživatel patří.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9e1e5-168">ID klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="9e1e5-169">Uživatelské jméno pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-169">The username to sign in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="9e1e5-170">Heslo pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-170">The password to sign in with.</span></span> |
| <span data-ttu-id="9e1e5-171">__Identita spravované služby__</span><span class="sxs-lookup"><span data-stu-id="9e1e5-171">__MSI__</span></span> | | <span data-ttu-id="9e1e5-172">Identita spravované služby nevyžaduje nastavení žádných přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="9e1e5-173">Aplikace musí být spuštěná v prostředku Azure s nakonfigurovaným používáním identity spravované služby.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="9e1e5-174">Podrobnosti najdete v tématu [Identita spravované služby pro prostředky Azure].</span><span class="sxs-lookup"><span data-stu-id="9e1e5-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="9e1e5-175">Pokud se potřebujete připojit k jinému cloudu nebo koncovému bodu správy, než je výchozí veřejný cloud Azure, můžete nastavit také následující proměnné prostředí.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="9e1e5-176">Mezi nejběžnější důvody jejich nastavení patří používání služby Azure Stack, cloudu v jiné geografické oblasti nebo modelu nasazení Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="9e1e5-177">Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="9e1e5-177">Environment variable</span></span> | <span data-ttu-id="9e1e5-178">Popis</span><span class="sxs-lookup"><span data-stu-id="9e1e5-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="9e1e5-179">Název cloudového prostředí, ke kterému se má připojit.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="9e1e5-180">ID prostředku Active Directory, který se má při připojování použít.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="9e1e5-181">Měl by to být identifikátor URI odkazující na váš koncový bod správy.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="9e1e5-182">Pokud používáte ověřování na základě prostředí, zavoláním funkce [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) získejte objekt Authorizer.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="9e1e5-183">Tento objekt se pak nastaví ve vlastnosti `Authorizer` klientů a umožní jim přístup k Azure.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="9e1e5-184">Ověřování v Azure Stacku</span><span class="sxs-lookup"><span data-stu-id="9e1e5-184">Authentication on Azure Stack</span></span>

<span data-ttu-id="9e1e5-185">Pro ověřování v Azure Stacku musíte nastavit následující proměnné:</span><span class="sxs-lookup"><span data-stu-id="9e1e5-185">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="9e1e5-186">Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="9e1e5-186">Environment variable</span></span> | <span data-ttu-id="9e1e5-187">Popis</span><span class="sxs-lookup"><span data-stu-id="9e1e5-187">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="9e1e5-188">Koncový bod služby Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-188">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="9e1e5-189">Identifikátor prostředku služby Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-189">The Active Directory resource ID.</span></span> |

<span data-ttu-id="9e1e5-190">Tyto proměnné se dají načíst z informací o metadatech Azure Stacku.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-190">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="9e1e5-191">Pokud chcete tato metadata načíst, otevřete webový prohlížeč v prostředí Azure Stacku a použijte adresu URL: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-191">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="9e1e5-192">`ResourceManagerURL` se liší v závislosti na názvu oblasti, názvu počítače a plně kvalifikovaném názvu domény (FQDN) vašeho nasazení Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="9e1e5-192">The `ResourceManagerURL` varies based on the region name, machine name and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="9e1e5-193">Prostředí</span><span class="sxs-lookup"><span data-stu-id="9e1e5-193">Environment</span></span> | <span data-ttu-id="9e1e5-194">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="9e1e5-194">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="9e1e5-195">Vývojová sada</span><span class="sxs-lookup"><span data-stu-id="9e1e5-195">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="9e1e5-196">Integrované systémy</span><span class="sxs-lookup"><span data-stu-id="9e1e5-196">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="9e1e5-197">Další informace o použití Azure SDK for Go v Azure Stacku najdete v tématu věnovaném [použití profilů verzí API s Go v Azure Stacku](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span><span class="sxs-lookup"><span data-stu-id="9e1e5-197">For more details on how to use Azure SDK for Go on Azure Stack see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>

## <a name="use-file-based-authentication"></a><span data-ttu-id="9e1e5-198">Použití ověřování na základě souboru</span><span class="sxs-lookup"><span data-stu-id="9e1e5-198">Use file-based authentication</span></span>

<span data-ttu-id="9e1e5-199">Ověřování na základě souboru pracuje s přihlašovacími údaji klientů jenom v případě, že jsou uložené ve formátu místního souboru vygenerovaném prostřednictvím [Azure CLI](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-199">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI](/cli/azure).</span></span> <span data-ttu-id="9e1e5-200">Tento soubor můžete jednoduše vytvořit při vytváření nového instančního objektu pomocí parametru `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-200">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="9e1e5-201">Pokud plánujete používat ověřování na základě souboru, nezapomeňte tento argument zadat při vytváření instančního objektu.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-201">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="9e1e5-202">Vzhledem k tomu, že rozhraní příkazového řádku vypisuje výstup do `stdout`, přesměrujte výstup do souboru.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-202">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="9e1e5-203">Nastavte proměnnou prostředí `AZURE_AUTH_LOCATION` na umístění autorizačního souboru.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-203">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="9e1e5-204">Aplikace tuto proměnnou prostředí přečte a provede parsování přihlašovacích údajů, které soubor obsahuje.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-204">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="9e1e5-205">Pokud potřebujete vybrat autorizační soubor za běhu, pracujte s prostředím programu pomocí funkce [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-205">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="9e1e5-206">Pokud chcete načíst ověřovací údaje, zavolejte funkci [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-206">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="9e1e5-207">Na rozdíl od ověřování na základě prostředí vyžaduje ověřování na základě souboru koncový bod prostředku.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-207">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="9e1e5-208">Další informace o používání instančních objektů a správě jejich přístupových oprávnění najdete v tématu [Vytvoření instančního objektu pomocí Azure CLI].</span><span class="sxs-lookup"><span data-stu-id="9e1e5-208">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="9e1e5-209">Použití ověřování pomocí tokenu zařízení</span><span class="sxs-lookup"><span data-stu-id="9e1e5-209">Use device token authentication</span></span>

<span data-ttu-id="9e1e5-210">Pokud chcete, aby se uživatelé přihlašovali interaktivně, nejlepší způsob, jak to umožnit, je prostřednictvím ověřování pomocí tokenu zařízení.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-210">If you want users to sign in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="9e1e5-211">Tento tok ověřování předá uživateli token pro vložení na přihlašovací stránku Microsoftu, kde se pak ověří pomocí účtu Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-211">This authentication flow passes the user a token to paste into a Microsoft sign-in site, where they then authenticate with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="9e1e5-212">Na rozdíl od standardního ověřování pomocí uživatelského jména a hesla tato metoda ověřování podporuje účty s povoleným vícefaktorovým ověřováním.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-212">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="9e1e5-213">Pokud chcete použít ověřování pomocí tokenu zařízení, pomocí funkce [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) vytvořte objekt Authorizer [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-213">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="9e1e5-214">Proces ověřování spustíte zavoláním metody [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) pro výsledný objekt.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-214">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="9e1e5-215">Ověřování tokenu zařízení zablokuje provádění programu, dokud se celý tok ověřování nedokončí.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-215">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="9e1e5-216">Použití klienta ověřování</span><span class="sxs-lookup"><span data-stu-id="9e1e5-216">Use an authentication client</span></span>

<span data-ttu-id="9e1e5-217">Pokud požadujete určitý typ ověřování a nevadí vám, že načtení ověřovacích údajů od uživatele bude obstarávat váš program, můžete použít jakéhokoli klienta, který je v souladu s rozhraním [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="9e1e5-217">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="9e1e5-218">Pokud chcete mít interaktivní program, použít specializované konfigurační soubory nebo máte požadavek, který vám brání použít jinou metodu ověřování, použijte typ, který implementuje toto rozhraní.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-218">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="9e1e5-219">Nikdy nekódujte přihlašovací údaje Azure napevno do aplikace.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-219">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="9e1e5-220">Vložením tajných klíčů do binárních souborů aplikace usnadníte útočníkům jejich extrakci, a to bez ohledu na to, jestli je aplikace spuštěná.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-220">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="9e1e5-221">Ohrozíte tím všechny prostředky Azure, ke kterým mají přihlašovací údaje autorizaci.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-221">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="9e1e5-222">Následující tabulka uvádí typy v sadě SDK, které jsou v souladu s rozhraním `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-222">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="9e1e5-223">Typ ověřování</span><span class="sxs-lookup"><span data-stu-id="9e1e5-223">Authentication type</span></span> | <span data-ttu-id="9e1e5-224">Typ objektu Authorizer</span><span class="sxs-lookup"><span data-stu-id="9e1e5-224">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="9e1e5-225">Ověřování pomocí certifikátů</span><span class="sxs-lookup"><span data-stu-id="9e1e5-225">Certificate-based authentication</span></span> | <span data-ttu-id="9e1e5-226">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="9e1e5-226">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="9e1e5-227">Přihlašovací údaje klienta</span><span class="sxs-lookup"><span data-stu-id="9e1e5-227">Client credentials</span></span> | <span data-ttu-id="9e1e5-228">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="9e1e5-228">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="9e1e5-229">Identita spravované služby</span><span class="sxs-lookup"><span data-stu-id="9e1e5-229">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="9e1e5-230">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="9e1e5-230">[MSIConfig]</span></span> |
| <span data-ttu-id="9e1e5-231">Uživatelské jméno a heslo</span><span class="sxs-lookup"><span data-stu-id="9e1e5-231">Username/password</span></span> | <span data-ttu-id="9e1e5-232">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="9e1e5-232">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="9e1e5-237">Pomocí příslušné funkce `New` vytvořte objekt Authenticator a pak proveďte ověření zavoláním metody `Authorize` pro výsledný objekt.</span><span class="sxs-lookup"><span data-stu-id="9e1e5-237">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="9e1e5-238">Příklad při použití ověřování pomocí certifikátů:</span><span class="sxs-lookup"><span data-stu-id="9e1e5-238">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
